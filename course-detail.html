<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CourseApp - Detalles del Curso</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="app-container">
        <!-- El menú lateral se inyectará aquí por load-sidebar.js -->

        <main class="main-content">
            <header class="top-bar-course-detail">
                <div class="top-bar">
                    <button id="" class="sidebar-toggle-mobile">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1>CourseApp</h1>
                </div>

                <h1 id="course-detail-title">
                    <span id="course-title-text">Cargando curso...</span>
                    <div class="save-icon-wrapper tooltip-container" data-tooltip="Guardar este curso">
                        <svg id="detail-save-icon" class="save-course-icon" viewBox="0 0 24 24">
                            <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                        </svg>
                    </div>
                </h1>
                <a href="index.html" class="back-button">← Volver a Cursos</a>
            </header>

            <section class="course-main-section">
                <div class="course-detail-overview">
                    <div class="video-player-placeholder">
                        <iframe id="course-video-iframe" width="100%" height="400" src="" frameborder="0"
                            allowfullscreen
                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture">
                        </iframe>
                        <!-- <div class="video-overlay"></div> -->
                        <h3 class="video-lesson-title" id="current-lesson-title">Selecciona una lección para comenzar
                        </h3>
                    </div>

                    <div class="course-info-boxes">
                        <div class="info-box">
                            <h4>Categoría</h4>
                            <p id="course-detail-category">N/A</p>
                        </div>
                        <div class="info-box">
                            <h4>Duración</h4>
                            <p id="course-detail-duration">N/A</p>
                        </div>
                        <div class="info-box">
                            <h4>Lecciones</h4>
                            <p id="course-detail-lessons-count">N/A</p>
                        </div>
                        <div class="info-box">
                            <h4>Nivel</h4>
                            <p id="course-detail-level">N/A</p>
                        </div>
                    </div>

                    <div class="course-resources-section" id="course-resources-section" style="display:none;">
                        <h2>Recursos</h2>
                        <ul id="course-detail-resources" class="resources-list">
                            <!-- Los recursos se cargarán aquí -->
                        </ul>
                    </div>

                    <div class="course-description-section">
                        <h2>Descripción del Curso</h2>
                        <p id="course-detail-description">Cargando descripción...</p>
                    </div>

                    <div class="course-instructor-section">
                        <h2>Instructor</h2>
                        <p id="course-detail-instructor">Cargando instructor...</p>
                        <a id="instructor-website" href="#" target="_blank" style="display:none;">Visitar sitio web</a>
                    </div>



                    <div class="course-prerequisites-section">
                        <h2>Prerrequisitos</h2>
                        <ul id="course-detail-prerequisites">
                            <li>Cargando prerrequisitos...</li>
                        </ul>
                    </div>

                    <div class="course-target-audience-section">
                        <h2>Audiencia Objetivo</h2>
                        <p id="course-detail-target-audience">Cargando audiencia...</p>
                    </div>

                    <div class="course-tags-section">
                        <h2>Etiquetas</h2>
                        <div class="tags-container" id="course-detail-tags">
                        </div>
                    </div>
                </div>

                <div class="course-lessons-list">
                    <h2>Lecciones del Curso</h2>
                    <ul id="lessons-list">
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <div id="notification-message" class="notification"></div>

    <!-- Cargar el script que inyecta el sidebar PRIMERO -->
    <script src="load-sidebar.js"></script>
    <script type="module" src="course-detail-renderer.js"></script>
    <script type="module">
        import { setupOdyseeOverlay } from './player/odysee.js';
        setTimeout(() => {
            // Inicializar el reproductor con IDs de iframe y overlay
            //setupOdyseePlayer("course-video-iframe", "player-overlay");
            const ctrl = setupOdyseeOverlay(
                'course-video-iframe',
                'player-overlay',
                //{ debug: true, leaveControlsVisible: true, controlsHeight: 72 }
            );
        }, 1000);




    </script>
</body>

</html>